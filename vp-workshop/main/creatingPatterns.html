<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Validated Patterns Workshop</title>
    <link rel="canonical" href="https://play.validatedpatterns.io/vp-workshop/main/creatingPatterns.html">
    <link rel="prev" href="repoFork.html#about">
    <link rel="next" href="secrets.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" style="font-size: 20px; color: white"
        href="https://play.validatedpatterns.io">
        <img src="../../_/img/validated-patterns.png" height="35px" alt="Red Hat Validated Patterns">&nbsp; Validated Patterns Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Patterns</a>
          <div class="navbar-dropdown">
          <a class="navbar-item" target="_blank" href="https://validatedpatterns.io/">Validated Patterns Home</a>
          <a class="navbar-item" target="_blank" href="https://validatedpatterns.io/ci">Status</a>
          <a class="navbar-item" target="_blank" href="https://validatedpatterns.io/blog">Blog</a>
        </div>
          </div>


        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Workshops</a>
          <div class="navbar-dropdown">
          <a class="navbar-item" target="_blank" href="https://openshiftdemos.github.io/openshift-gitops-workshop">OpenShift GitOps Workshop</a>
          <a class="navbar-item" target="_blank" href="https://openshiftdemos.github.io/argo-rollouts-workshop">Argo Rollouts Workshop</a>
          </div>
        </div> 

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://developers.redhat.com">Red Hat Developers</a>
            <a class="navbar-item" target="_blank" href="https://developers.redhat.com/app-dev-platform">App Dev Platform</a>
            <a class="navbar-item" target="_blank" href="https://www.redhat.com/en/products/application-foundations">Red Hat Application Services</a>
          </div>
        </div> 

      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="vp-workshop" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">Validated Patterns Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="getting-started.html">1. Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#prereqs">Pre-Requisites</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="patterns.html">2. Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#goals">Validated Patterns Business Goals</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#benefits">Benefits of Validated Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#batteries">Batteries Included</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#whotheyfor">Who are the Patterns for</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patternsDemo.html">Demo</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="landscape.html">3. Existing Pattern Landscape</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="landscape.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="landscape.html#patterns">Available Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="landscape.html#website">Where to find existing Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html">Partners</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html#intel">Intel</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#intel-mcgo">Intel MultiCloud GitOps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#intel-md">Intel Medical Diagnosis</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html#pwx-mcgo">Portworx</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#pwx-mcgo">Portworx</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html#cisco-pwx-mcgo">Cisco</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#cisco-pwx-mcgo">Cisco</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html#veeam-mcgo">Veeam/Kasten</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#veeam-mcgo">Veeam/Kasten</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="tiers.html">4. Pattern Tiers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tiers.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tiers.html#about">About the Pattern Tiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tiers.html#resources">Additional Resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="consumingPatterns.html">5. Validated Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="consumingPatterns.html">Consuming a Validated Pattern</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns.html#workflow">Validated Pattern Workflow</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns.html#layering">Solution Layering</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns.html#multiArgos">Multiple Argo&#8217;s</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns-valuesFiles.html#values">Pattern Values Files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="patternsOperator.html#features">About the Patterns Operator</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="patternsWrapperScript.html#about">About the Patterns.sh wrapper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="patternsWrapperScript.html#help">Wrapper Help</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="repoFork.html#about">To Fork or Not to Fork</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="creatingPatterns.html">Creating a Validated Pattern</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#common">Understanding Common</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#creating">Creation Process</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="secrets.html">6. Secrets Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="secrets.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="secrets.html#secretsGitops">Secrets Management and GitOps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pattern-secrets-management.html#esoVault">ESO and Vault</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pattern-secrets-management.html#approaches">Approaches</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pattern-secrets-management.html#encryptedSecrets">Encrypted Secrets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pattern-secrets-management.html#secretReferences">References to Secrets</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pattern-secrets-management.html#vaultconcepts">Vault Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pattern-secrets-management.html#esoconcepts">ESO Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="secrets-loading.html#secretLoading">Secrets Loading</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="secrets-loading.html">Secrets Loading</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="secrets-loading.html#valuesecret">Secrets Template in the Patterns</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="secrets-loading.html#secretexamples">Secret Examples</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="selfContained.html">7. Self Contained Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="selfContained.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="selfContained.html#thoughts">Additional Thoughts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="gitopsRoughEdges.html">8. GitOps Rough Edges</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gitopsRoughEdges.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gitopsRoughEdges.html#declarativeSync">Declarative Synchronization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="gitopsRoughEdges.html#imperative">Imperative Actions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="gitopsRoughEdges.html#jobs">Kubernetes Jobs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="gitopsRoughEdges.html#cron">Kubernetes cronJobs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="gitops-roughedges-syncwave-hooks.html">Sync Waves and Hooks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="gitops-roughedges-syncwave-hooks.html#using_syncwaves">Using Sync Waves</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="gitops-roughedges-syncwave-hooks.html#exploring_the_manifests_waves">Exploring Sync Wave Manifests</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="gitops-roughedges-syncwave-hooks.html#using_resource_hooks">Using Resource Hooks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="gitops-roughedges-syncwave-hooks.html#exploring_the_manifests_hooks">Exploring Resource Hook Manifests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="multipleClusters.html">9. Working with Multiple Clusters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="multipleClusters.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="multipleClusters.html#why">Why manage multiple clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="multipleClusters.html#challenges">Multi-Cluster Challenges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="multipleClusters.html#rhacm">Red Hat Advanced Cluster Management for Kubernetes</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="additionalTopics.html">10. Additional Resources</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="imperative.html">Imperative Framework</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="imperative.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="imperative.html#versus">Imperative v. Declarative Actions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="imperative.html#declaring">Declaring an imperative action</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="imperative.html#cron-example">Imperative cronJob example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="clusterDomains.html">Handling Cluster Domains</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="clusterDomains.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="clusterDomains.html#limitations">Limitations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="clusterDomains.html#variables">Variables set by the Pattern</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="multisource.html">Multi Source Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#meaning">What does it mean to use multisource?</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#how">How it works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#status">Current Status</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#ux">User Experience</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#helmRepo">Helm Chart Repository</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#chart-release">Creating a chart release</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multisource.html#next">Next Steps</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Validated Patterns Workshop</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Validated Patterns Workshop</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Validated Patterns Workshop</a></li>
    <li><a href="consumingPatterns.html">5. Validated Patterns</a></li>
    <li><a href="creatingPatterns.html">Creating a Validated Pattern</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/validatedpatterns/workshop/edit/main/documentation/modules/ROOT/pages/creatingPatterns.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="_creating_validated_patterns"><a class="anchor" href="#_creating_validated_patterns"></a>Creating Validated Patterns</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_topic_objectives"><a class="anchor" href="#_topic_objectives"></a>Topic Objectives</h2>
<div class="sectionbody">
<div id="objectives" class="paragraph">
<p>In this topic we will discuss:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Understanding <code>common</code></p>
</li>
<li>
<p>Pattern Requirements</p>
</li>
<li>
<p>Creation Process</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Core Concepts</div>
<div class="ulist">
<ul>
<li>
<p><strong>Creating is Extending</strong> We never really create a new pattern from zero. Instead we extend our basic pattern using artifacts that we have developed along the way</p>
</li>
<li>
<p><strong>Artifacts</strong> Artifacts can include Helm Charts, Kustomize manifests, or plain Kubernetes manifests</p>
</li>
<li>
<p><strong>Moving Artifacts into the Validated Patterns framework</strong> Many artifacts require conversion to Helm chart templates and parameterizing certain values</p>
</li>
<li>
<p><strong>Helm</strong> Helm is a kubernetes package manager that allows you to define, install and manage kubernetes applications as reusable packages called charts</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="common"><a class="anchor" href="#common"></a>Understanding common</h2>
<div class="sectionbody">
<div class="paragraph">
<p>What&#8217;s the role of the <strong>common</strong> repository?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The core components that make up the Validated Patterns framework are contained in the common repository</p>
</li>
<li>
<p>Including:</p>
<div class="ulist">
<ul>
<li>
<p>OpenShift GitOps configurations</p>
</li>
<li>
<p>RHACM configuration and Global Policies</p>
<div class="ulist">
<ul>
<li>
<p>Support for <strong>clusterGroup</strong> and <strong>GitOps</strong> policies</p>
</li>
</ul>
</div>
</li>
<li>
<p>Validated Pattern build scripts and Makefiles</p>
</li>
<li>
<p>Secrets Management (Hashicorp Vault)</p>
</li>
<li>
<p>Operator CRDs and other assets</p>
</li>
<li>
<p>Various utility scripts</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>What&#8217;s in common?</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The common repository is where all the common manifests for the Validated Patterns framework live
</td>
</tr>
</table>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>acm</strong> - contains the helm charts, which contains policies and is used to configure the deployment of the Red Hat Advanced Cluster Management for Kubernetes</p>
</li>
<li>
<p><strong>clusterGroup</strong> - contains the helm charts used to create namespaces, subscriptions, Argo Project and Applications described in values files. THis is the seed for all the patterns.</p>
</li>
<li>
<p><strong>operator-install</strong> - contains the helm chart used by the Validated Patterns operator to create the openshift-gitops component, creating the initial ArgoCD applications for Validated Patterns.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">common
├── acm
├── ansible
├── Changes.md
├── clustergroup
├── common -&gt; .
├── examples
├── golang-external-secrets
├── hashicorp-vault
├── LICENSE
├── Makefile
├── letsencrypt
├── operator-install
├── README.md
├── reference-output.yaml
├── scripts
├── super-linter.log
├── tests
└── values-global.yaml</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ansible</strong> - this directory contains the ansible roles and modules that support the secrets management for a pattern</p>
</li>
<li>
<p><strong>hashicorp-vault</strong> - contains the helm chart for HashiCorp Vault</p>
</li>
<li>
<p><strong>scripts</strong> - contains utility scripts used by the Validated Patterns Framework</p>
</li>
<li>
<p><strong>golang-external-secrets</strong> - Helm chart for the External Secrets Operator</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_whats_next_for_common"><a class="anchor" href="#_whats_next_for_common"></a>What&#8217;s next for common?</h3>
<div class="ulist">
<ul>
<li>
<p>We are in the very early stages of moving the helm charts in common into a public Helm repository</p>
</li>
<li>
<p>Deploying our patterns with multi-source enabled which allows us to use multiple sources for values, which will help reduce the need to have all the charts in the repo</p>
</li>
<li>
<p>Continue to maintain Makefiles, Ansible scripts and other tools in this repo in support of deploying patterns</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may be wondering - <strong>why</strong>?</p>
</div>
<div class="paragraph">
<p>We want to maximize modularity in the framework. This will reduce our reliance on the common repository as it is today and will decrease the footprint and complexity of the patterns.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creation"><a class="anchor" href="#creation"></a>Creation Process</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/create-where2start.png" alt="create where2start">
</div>
</div>
<div class="paragraph">
<p>One of the first things we should do before embarking on creating a pattern is to identify a problem to solve.
This can come from an existing customer problem or an idea on how we can showcase some of our Red Hat products working together.
You can use one of our simplest validated patterns, multicloud gitops, as a starting point by using the template to create a new Git repository in your local GitHub account.
You might already have an existing demo that you can use and convert it to use the Validated Pattern framework.</p>
</div>
<div class="paragraph">
<p>The next step is to identify the technology components that you will need.
In the case of an existing demo you might already know which components are part of the pattern.</p>
</div>
<div class="paragraph">
<p>The final step is to ensure that the configuration of those components, and the integration points, are handled in the pattern.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_naming"><a class="anchor" href="#_setting_up_naming"></a>Setting up naming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two names that exist a pattern: The <code>pattern</code> name  and the <code>clusterGroup</code> name.
Best practice is to align <code>pattern</code> with the repository title as it drives file naming for secrets file: <code>values-secrets-{pattern}.yaml</code></p>
</div>
<div class="paragraph">
<p>clusterGroup is most relevant when you have multiple clusters. Otherwise you can rely on the default <code>hub</code> group.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  global:
    pattern: multicloud-gitops
    options:
      useCSV: false
      syncPolicy: Automatic
      installPlanApproval: Automatic
  main:
    clusterGroupName: hub</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_to_the_bill_of_materials"><a class="anchor" href="#_adding_to_the_bill_of_materials"></a>Adding to the Bill of materials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are three major resources you can add: Operators, Applications (helm charts) and ansible (imperative) scripts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introducing_new_operators"><a class="anchor" href="#_introducing_new_operators"></a>Introducing new operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Operators can be simply added to the clusterGroup as subscriptions</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  subscriptions:
    acm:
      name: advanced-cluster-management
      namespace: open-cluster-management
      channel: release-2.9
    s3:
      name: ack-s3-controller
      namespace: ack-system
      channel: alpha
      source: community-operators
    cte:
      name: cte-k8s-operator
      namespace: openshift-operators
      channel: stable
      source: certified-operators</code></pre>
</div>
</div>
<div class="paragraph">
<p>To find the <strong>correct</strong> names the easiest way to do this is to jump into the console, find the operator, get to the install screen</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/operator-install.png" alt="operator install">
</div>
</div>
<div class="paragraph">
<p>The URL at this point can be used to pull out the name (pkg), catalog, channel etc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introducing_new_helm_charts"><a class="anchor" href="#_introducing_new_helm_charts"></a>Introducing new helm charts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The easiest way to start with new helm charts is to copy and paste from the example charts in multicloud-gitops.
Each helm chart gets added as an argoCD application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  applications:
    golang-external-secrets:
      name: golang-external-secrets
      namespace: golang-external-secrets
      project: hub
      path: common/golang-external-secrets

    cnv: # arbitrary
      name: cnv # name of argoCD applcation
      namespace: openshift-cnv
      project: cnv # argoCD project
      path: charts/all/cnv # relative path to the chart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Convention puts the helm charts for the validated-pattern under <code>charts/</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chaining_configuration_into_the_charts"><a class="anchor" href="#_chaining_configuration_into_the_charts"></a>Chaining configuration into the charts.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One key element of validated patterns is a structured set of variable overrides.
These overrides are key to allowing the template to be kept as 'DRY' as possible when configuring.
For this context it&#8217;s important to understand the evaluation order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The default values defined in the chart (or sub charts).</p>
</li>
<li>
<p><code>values-global.yaml</code> file</p>
</li>
<li>
<p>Values within clusterGroup files (e.g. `values-hub.yaml)</p>
</li>
<li>
<p>Values override files with precedence for the (top/bottom) of the valid list</p>
</li>
<li>
<p>Values overrides shown in individual application definitions</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Default files installed in a chart</strong></p>
</div>
<div class="paragraph">
<p>All helm charts <strong>MUST</strong> contain a <code>values.yaml</code> file.
Values that are defined here should be considered the 'base' consideration.
While it&#8217;s possible to not define a value here, yet use it in the chart, it is strongly recommended sensible defaults are included.</p>
</div>
<div class="paragraph">
<p><strong><code>values-global.yaml</code> file</strong></p>
</div>
<div class="paragraph">
<p>Values here are applied to every argocd application as it is picked up directly by the validated patterns operator.
The values here are also usable in the <code>clusterGroup</code> files</p>
</div>
<div class="paragraph">
<p><strong>ClusterGroup</strong> files overrides</p>
</div>
<div class="paragraph">
<p>Values can directly be used within the context of files such as <code>values-hub.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  letsencrypt:
    region: ''
    server: https://acme-v02.api.letsencrypt.org/directory
    # staging URL
    # server: https://acme-staging-v02.api.letsencrypt.org/directory
    email: chris@thebutlers.me
  clusterGroup:
    name: hub
    isHubCluster: true</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Values override files</strong></p>
</div>
<div class="paragraph">
<p><code>clusterGroup`s define an override file list which is evaluated in order.
The cluster overrides files can take of the variables defined in `values-global.yaml</code> as well as metadata assembled by the operator, OpenShift and Red Hat Advanced Cluster Management for Kubernetes.</p>
</div>
<div class="paragraph">
<p>These dynamic variables allow abstraction from variability between OpenShift installation. <code>storageClasses</code> varying across <code>clusterPlatform</code> is a clear example.</p>
</div>
<div class="paragraph">
<p>The order of operations can be changed based on uses requirements easily with the list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  overrides:
    - '/overrides/values-{{ $.Values.global.clusterPlatform }}.yaml'
    - '/overrides/values-{{ $.Values.global.clusterPlatform }}-{{ $.Values.global.clusterVersion }}.yaml'
    - '/overrides/values-{{ $.Values.global.clusterPlatform }}-{{ $.Values.clusterGroup.name }}.yaml'
    - '/overrides/values-{{ $.Values.global.clusterVersion }}-{{ $.Values.clusterGroup.name }}.yaml"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Discovery activity</strong>: Logging into console for the <code>cluster</code> OpenShift gitops.
Examine the root application to discover what variables have been provided to ArgoCD.</p>
</div>
<div class="paragraph">
<p><strong>Individual application overrides</strong></p>
</div>
<div class="paragraph">
<p>Individual applications should be reserved for use-cases where there is risk of conflict across multiple charts in the same application group.
They should be viewed as absolutely hard coded into the pattern.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  applications:
    coffeeshop-test:
      name: quarkuscoffeeshop-demo
      namespace: quarkuscoffeeshop-demo
      project: quarkuscoffeeshop-demo
      path: charts/store/quarkuscoffeeshop-charts
      overrides:
      - name: ocp_auth.bind_dn
        value: "uid=ldap_admin\\,cn=users\\,cn=accounts\\,dc=redhatlabs\\,dc=dev"
      - name: ocp_auth.bind_password
        value: "supersecret"</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="repoFork.html#about" class="query-params-link">To Fork or Not to Fork</a></span>
  <span class="next"><a href="secrets.html" class="query-params-link">6. Secrets Management</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <img
          src="../../_/img/validated-patterns.png" height="40px" alt="Red Hat Validated Patterns"  href="https://redhat.com" ></a>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>

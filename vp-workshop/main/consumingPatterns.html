<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Validated Patterns Workshop</title>
    <link rel="canonical" href="https://validatedpatterns.github.io/workshop/vp-workshop/main/consumingPatterns.html">
    <link rel="prev" href="tiers.html">
    <link rel="next" href="consumingPatterns-valuesFiles.html#values">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://validatedpatterns.github.io/workshop">Validated Patterns Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="vp-workshop" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="getting-started.html">1. Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#prereqs">Pre-Requisites</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="patterns.html">2. Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#goals">Validated Patterns Business Goals</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#benefits">Benefits of Validated Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#batteries">Batteries Included</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patterns.html#whotheyfor">Who are the Patterns for</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patternsDemo.html">Demo</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="landscape.html">3. Existing Pattern Landscape</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="landscape.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="landscape.html#patterns">Available Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="landscape.html#website">Where to find existing Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html">Partners</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html#intel">Intel</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#intel-mcgo">Intel MultiCloud GitOps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#intel-md">Intel Medical Diagnosis</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html">Portworx</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#pwx-mcgo">Portworx</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html">Cisco</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#cisco-pwx-mcgo">Cisco</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="partners.html">Veeam/Kasten</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="partners.html#veeam-mcgo">Veeam/Kasten</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="tiers.html">4. Pattern Tiers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tiers.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tiers.html#about">About the Pattern Tiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tiers.html#resources">Additional Resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="consumingPatterns.html">5. Validated Patterns</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="consumingPatterns.html">Consuming a Validated Pattern</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#workflow">Deployment Workflow</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#layering">Solution Layering</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#multiArgos">Multiple Argo&#8217;s</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns-valuesFiles.html#values">Pattern Values Files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="consumingPatterns-valuesFiles.html#valuesSecret">Pattern Secret Values Template</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#exercises">Exercises</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="creatingPatterns.html">Creating Validated Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="creatingPatterns.html#objectives">Topic Objectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="creatingPatterns.html#technology">Core Products and Technology</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="creatingPatterns.html#exercises">Exercies</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="consumingPatterns.html">Consuming Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#exercises">Exercises</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="secrets.html">6. Secrets Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="secrets.html">Exercises</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="selfContained.html">7. Self Contained Patterns</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="selfContained.html">Exercises</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="gitopsRoughEdges.html">8. GitOps Rough Edges</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="gitopsRoughEdges.html">Exercises</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="multipleClusters.html">9. Working with Multiple Clusters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting.html">10. Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="helm.html">11. Helm for Fun and Profit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="additionalTopics.html">12. Additional Resources</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Validated Patterns Workshop</a></li>
    <li><a href="consumingPatterns.html">5. Validated Patterns</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/validatedpatterns/workshop/edit/main/documentation/modules/ROOT/pages/consumingPatterns.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="_consuming_validated_patterns"><a class="anchor" href="#_consuming_validated_patterns"></a>Consuming Validated Patterns</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_topic_objectives"><a class="anchor" href="#_topic_objectives"></a>Topic Objectives</h2>
<div class="sectionbody">
<div id="objectives" class="paragraph">
<p>In this topic we will discuss:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validated Pattern Deployment workflow</p>
</li>
<li>
<p>Describing a pattern</p>
</li>
<li>
<p>Using the patterns operator</p>
<div class="ulist">
<ul>
<li>
<p>And the patterns.sh script</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preparing your environment</p>
</li>
<li>
<p>Understand our base pattern</p>
</li>
<li>
<p>To fork or not to fork</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validated_pattern_workflow"><a class="anchor" href="#_validated_pattern_workflow"></a>Validated Pattern workflow</h2>
<div class="sectionbody">
<div id="workflow" class="paragraph">
<p>Let&#8217;s dive into what happens when we deploy a pattern! Take a look at the following graphic to see what is deployed on the <code>hub</code> clusterGroup cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consuming-vpWorkflow-hub.png" alt="Hub Cluster">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The patterns operator deploys an instance of Red Hat OpenShift GitOps and creates the initial application</p>
</li>
<li>
<p>ArgoCD then deploys the operators, namespaces, projects and applications defined in the values files</p>
</li>
<li>
<p>If deploying across multiple clusters, the framework uses Red Hat Advanced Cluster Management for Kubernetes policies to create the instance of Red Hat OpenShift GitOps on the remote cluster</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>values-hub.yaml</code> is the primary values file for the <code>hub</code> cluster
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consuming-vpWorkflow-managedCluster.png" alt="Managed Cluster">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When a managed cluster is joined to Red Hat Advanced Cluster Management for Kubernetes it needs to have a clusterGroup label applied to it for the correct policies and applications to be deployed.</p>
</li>
<li>
<p>Red Hat Advanced Cluster Management for Kubernetes will confirm the cluster is managed then deploy a rhacm agent</p>
</li>
<li>
<p>A placement policy is then deployed to the managed cluster which installs an instances of Red Hat OpenShift GitOps</p>
</li>
<li>
<p>The managed cluster&#8217;s instance of ArgoCD will then deploy the resources declared in <code>values-clustergroup.yaml</code></p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Deploying the pattern through the OpenShift Console or via <code>pattern.sh</code> will deploy the patterns operator.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_element_layering"><a class="anchor" href="#_element_layering"></a>Element Layering</h3>
<div id="layering" class="paragraph">
<p>The base component of every Validated Pattern is <code>common</code> - which is a <a href="https://github.com/validatedpatterns/common">Github Repo</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consuming-common.png" alt="common">
</div>
</div>
<div class="paragraph">
<p>Without further configuration, common is acutally quite boring. So let&#8217;s add another layer!</p>
</div>
<div class="paragraph">
<p>Your specific industry or use-case is layered into the framework and utilizes the underlying common. In this example the solution includes a bespoke application, cloud-native cluster storage, Red Hat Advanced Cluster Security for Kubernetes, and an enterprise container registry. The framework will deploy and configure these components through Helm charts, kustomize manifests or Ansible if necessary.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consuming-common-solution-layering.png" alt="consuming common solution layering">
</div>
</div>
<div class="paragraph">
<p>What if we wanted to swap these products out with a similar or like-in-kind solution? The workflow remains the same:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>remove the undesired application declaration</p>
</li>
<li>
<p>declare the new application in your values file</p>
</li>
<li>
<p>declare where the helm charts reside (path, repo)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following graphic illustrates swapping components in the framework:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consuming-common-solution-layering-modular.png" alt="consuming common solution layering modular">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multiArgos"><a class="anchor" href="#multiArgos"></a>Multiple ArgoCDs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may be asking yourself &#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consuming-multipleArgos.png" alt="consuming multipleArgos">
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="tiers.html">4. Pattern Tiers</a></span>
  <span class="next"><a href="consumingPatterns-valuesFiles.html#values">Pattern Values Files</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
